<div *ngIf="directory != null">
  <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2">Miembros</h1>
    <div class="d-flex align-items-center">
      <div class="form-check form-switch me-2">
        <nz-switch [(ngModel)]="directory.isPublic"  [nzControl]="true" (click)="changeIsPublic($event)" [nzLoading]="isSubmit"></nz-switch>
        <label class="form-check-label" for="flexSwitchCheckDefault">Hacerlo público</label>
      </div>
      <div class="dropdown">
        <button class="btn btn-primary dropdown-toggle ms-1" type="button" id="dropdownMenuButton1"
          data-bs-toggle="dropdown" aria-expanded="false">
          Menu
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
          <li><a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#invitacion">
            Enviar invitación</a></li>
          <li>
          <li><a class="dropdown-item" [routerLink]="['/private/form-member',directory.id]">
            Nuevo miembro</a></li>
          <li>
          <hr class="dropdown-divider">
          </li>
          <li><a class="dropdown-item" [routerLink]="['/private/form-directory/edit',directory.id]">Actualizar directorio</a></li>
          <li>
            <a class="dropdown-item delete-item"
              nz-popconfirm
              nzPopconfirmTitle="Estas seguro de eliminar el directorio?"
              nzPopconfirmPlacement="bottom"
              (nzOnConfirm)="confirmDelete(directory)">Eliminar</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <div class="col-lg-12">
      <div class="card shadow-sm">
          <img [src]="getImg('header')" class="card-img-top img-gluid" alt="Galerías Guadalajara">
          <div class="card-body">
              <div class="position-relative">
                  <img [src]="getImg('profile')" class="img-fluid rounded-circle position-absolute position-absolute bottom-0 start-0" width="10%">
              </div>
              <div class="d-flex justify-content-between mt-2">
                  <h5 class="card-title">{{directory!.name}}</h5></div>
          </div>
      </div>
  </div>
  <div class="row d-flex justify-content-center align-items-center py-4">
      <nz-empty *ngIf="directory?.members?.length == 0" nzNotFoundImage="simple"></nz-empty>
      <div class="col-lg-3 col-md-6 col-sm-6 mb-4" *ngFor="let member of directory.members">
          <div class="card shadow-sm">
              <img class="img-thumbnail" *ngFor="let img of member.images;let first = first" [hidden]="!first" [src]="img.base64" alt="">
              <div class="card-body">
                  <a [routerLink]="['/private/member/',member.id]">
                      <h5 class="card-title">{{member.name}}</h5>
                      <p class="card-text">{{member.short_description}}</p>
                  </a>
              </div>
          </div>
      </div>
  </div>
</div>


<!-- Modal Invitación-->
<div class="modal fade" id="invitacion" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel"></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="row d-flex justify-content-center text-center">
          <div class="col-lg-10">
            <p class="text-center">Envia esta invitación mediante el siguiente código.</p>
            <div class="card">
              <div class="card-body bg-light">
                {{getBaseUrl()+ '/public/Invitation/' + directory!.shared_code}}
                <button (click)="copyUrl()">
                  <i nz-icon nzType="copy" nz-tooltip nzTooltipTitle="Copiar link" ></i>
                </button>
              </div>
            </div>
            <p class="my-2">o mediante los enlaces siguientes:</p>
            <a class="btn btn-primary" (click)="sharedWhatsapp()" >
              Enviar por whatsapp
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



<nz-skeleton [nzLoading]="directory == null" [nzActive]="true" [nzAvatar]="true" class="mt-5">
  <ng-template #starAction>
    <i nz-icon nzType="star-o" style="margin-right: 8px;"></i>
    156
  </ng-template>
  <ng-template #likeAction>
    <i nz-icon nzType="like-o" style="margin-right: 8px;"></i>
    156
  </ng-template>
  <ng-template #msgAction>
    <i nz-icon nzType="message" style="margin-right: 8px;"></i>
    2
  </ng-template>
</nz-skeleton>
<nz-skeleton [nzLoading]="directory == null" [nzActive]="true" [nzAvatar]="true">
  <ng-template #starAction>
    <i nz-icon nzType="star-o" style="margin-right: 8px;"></i>
    156
  </ng-template>
  <ng-template #likeAction>
    <i nz-icon nzType="like-o" style="margin-right: 8px;"></i>
    156
  </ng-template>
  <ng-template #msgAction>
    <i nz-icon nzType="message" style="margin-right: 8px;"></i>
    2
  </ng-template>
</nz-skeleton>
<nz-skeleton [nzLoading]="directory == null" [nzActive]="true" [nzAvatar]="true">
  <ng-template #starAction>
    <i nz-icon nzType="star-o" style="margin-right: 8px;"></i>
    156
  </ng-template>
  <ng-template #likeAction>
    <i nz-icon nzType="like-o" style="margin-right: 8px;"></i>
    156
  </ng-template>
  <ng-template #msgAction>
    <i nz-icon nzType="message" style="margin-right: 8px;"></i>
    2
  </ng-template>
</nz-skeleton>
